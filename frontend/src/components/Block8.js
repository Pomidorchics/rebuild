import React, { useState } from 'react';
import '../styles/Block8.css';
import logo from "../assets/logo_header.png";

function Questions() {
  const [selectedQuestion, setSelectedQuestion] = useState(1);

  const questions = [
    {
      id: 1,
      question: "Как происходит расчет стоимости ремонта?",
      answer: `Стоимость рассчитывается индивидуально, исходя из объемов работ, сложности планировки и выбранных материалов. После бесплатной консультации и выезда замерщика мы составляем подробную смету, где прописана стоимость всех работ. Цена, зафиксированная в договоре, не меняется в процессе ремонта.`
    },
    {
      id: 2,
      question: "Вы даете гарантию на работы? На какой срок?",
      answer: `Да, мы предоставляем официальную гарантию на все выполненные работы сроком до 3  лет. Все гарантийные обязательства прописываются в договоре. Если в течение этого времени проявятся какие-либо недостатки, мы бесплатно их устраним.`
    },
    {
      id: 3,
      question: "Сколько по времени длится ремонт? От чего зависят сроки?",
      answer: `Сроки зависят от типа ремонта и площади помещения:
*   Косметический ремонт: 1-2 недели
*   Капитальный ремонт: 1-2 месяца
*   Комплексный ремонт "под ключ" в новостройке: 2-3 месяца
Точные сроки мы фиксируем в договоре и строго их соблюдаем. На скорость работ влияет сложность черновых работ, скорость поставок материалов и согласование перепланировок.`
    },
    {
      id: 4,
      question: "Можно ли закупить материалы самостоятельно?",
      answer: `Да, вы можете закупить материалы сами. Однако мы рекомендуем доверить это нам, так как:
*   Мы даем гарантию на материалы, приобретенные у наших проверенных поставщиков.
*   Мы покупаем материалы по оптовым ценам, что часто выгоднее.
*   Мы точно просчитаем необходимое количество и вовремя обеспечим объект, чтобы не было простоев.`
    },
    {
      id: 5,
      question: "Как происходит контроль качества? Кто будет следить за работами на объекте?",
      answer: `На каждом объекте работает прораб, который ежедневно контролирует ход и качество работ. Кроме того, регулярный выездной контроль осуществляет технический руководитель. Вы всегда будете в курсе процесса: мы ведем фото- и видеоотчеты в WhatsApp или Telegram на всех ключевых этапах.`
    },
    {
      id: 6,
      question: "Нужен ли дизайн-проект и делаете ли вы его?",
      answer: `Дизайн-проект не обязателен, но крайне рекомендован. Он помогает:
*   Точно рассчитать бюджет и избежать перерасхода материалов.
*   Увидеть будущий результат в 3D-визуализации.
*   Избежать ошибок с расстановкой мебели, розеток и освещения.
Да, мы оказываем услугу по разработке дизайн-проекта, который потом точно реализуем.`
    },
    {
      id: 7,
      question: "Какой порядок оплаты? Нужна ли предоплата?",
      answer: `Мы работаем с прозрачной поэтапной системой оплаты. Оплата делится на 4-5 частей и привязывается к завершению ключевых этапов работ (демонтаж, черновые работы, чистовая отделка и т.д.). Предоплата требуется только на закупку материалов для первого этапа. Это комфортно и безопасно для обеих сторон.`
    },
    {
      id: 8,
      question: "Мы живем в квартире во время ремонта. Это возможно?",
      answer: `Да, мы найдем решение. Однако для вашего же комфорта и для скорости работы мы рекомендуем по возможности освободить помещение на время черновых работ (они самые шумные и пыльные). На время чистовой отделки можно вернуться. Мы всегда зонируем пространство и используем пленку для защиты мебели, если вы остаетесь`
    },
    {
      id: 9,
      question: `Что входит в понятие "ремонт под ключ"?`,
      answer: `"Под ключ" — это полный цикл работ, где мы берем на себя все задачи:
*   Обсуждение и проектирование.
*   Демонтаж и вывоз мусора.
*   Все черновые и чистовые работы.
*   Закупку и доставку материалов.
*   Уборку помещения после ремонта.
*   Сдачу объекта и гарантийное обслуживание.
В итоге вы получаете ключи от квартиры, полностью готовой к проживанию.`
    }
  ];

  const handleQuestionClick = (questionId) => {
    if (selectedQuestion === questionId) {
      setSelectedQuestion(null);
    } else {
      setSelectedQuestion(questionId);
    }
  };

  return (
    <section className="chat-section" id="faq">
      <h2 className="chat-title">Часто задаваемые вопросы</h2>
      
      <div className="telegram-chat">
        <div className="chat-header">
          <div className="chat-avatar">
            <div className="avatar-placeholder">
              <img
                src={logo}
                alt={""}
              />
            </div>
          </div>
          <div className="chat-info">
            <h3 className="chat-name">СК "Перестройка"</h3>
            <p className="chat-status">онлайн</p>
          </div>
        </div>

        <div className="chat-messages">
          {questions.map((item) => (
            <div key={item.id}>
              <div className="message-container">
                <div 
                  className={`message question-message ${selectedQuestion === item.id ? 'selected' : ''}`}
                  onClick={() => handleQuestionClick(item.id)}
                >
                  <div className="message-content">
                    <p>{item.question}</p>
                    <span className="message-time">12:30</span>
                    <div className="message-status">✓✓</div>
                  </div>
                </div>
              </div>
              
              {selectedQuestion === item.id && (
                <div className="message-container answer-message-container">
                  <div className="message answer-message">
                    <div className="message-content">
                      <p style={{whiteSpace: 'pre-line'}}>
                        {item.answer}
                      </p>
                      <span className="message-time">12:31</span>
                    </div>
                  </div>
                </div>
              )}
            </div>
          ))}
        </div>

        <div className="chat-input-container">
          <div className="chat-input">
            <button className="message-input">
              Задать свой вопрос...
            </button>
            <button className="send-button">&#9658;</button>
          </div>
        </div>
      </div>
    </section>
  );
}

export default Questions;